<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/logo21.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='trending.css') }}"> <!-- Re-using trending.css for book card layout -->
    <title>The Grey Ink | {{ category_name }}</title>
</head>
<body>
    <div class="bg">
        <div class="main-header-section">
            <a href="{{ url_for('index') }}" class="logo-link">
                <img src="{{ url_for('static', filename='assets/logo21.png') }}" class="logo" alt="The Grey Ink Logo">
                <h1><a href="{{ url_for('index') }}">The Grey Ink</a></h1>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="{{ url_for('category') }}">Categories</a></li>
                    <li><a href="{{ url_for('trending') }}">Trending</a></li>
                    {% if 'user' in session %}
                        <li><a href="{{ url_for('profile') }}">Profile</a></li>
                        <li><a href="{{ url_for('logout') }}" class="black-box">Logout</a></li>
                    {% else %}
                        <li><a href="{{ url_for('signup') }}" class="black-box">Sign Up</a></li>
                    {% endif %}
                </ul>
            </nav>
        </div>

        <div class="container">
            <h2 class="section-title">{{ category_name }} Books</h2>
            <div class="trending-books-grid">
                {% for i in range(book_name|length) %}
                    <div class="book-card">
                        <img src="{{ image[i] }}" alt="Cover for {{ book_name[i] }}">
                        <h3>{{ book_name[i] }}</h3>
                        <p><em>{{ author[i] }}</em></p>
                        <div class="rating-info">
                            <span class="rating-score">{{ rating[i]|round(1) }}</span>
                            <span class="votes">({{ votes[i] }} votes)</span>
                        </div>
                        {% if 'user' in session %}
                          <form action="{{ url_for('add_to_my_books') }}" method="POST" style="margin-top: auto;">
                            <input type="hidden" name="book_title" value="{{ book_name[i] }}">
                            <button type="submit" class="save-book-button">Save</button>
                          </form>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</body>
</html>